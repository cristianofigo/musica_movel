#N canvas 168 32 965 768 10;
#X obj 383 185 random 100;
#X obj 383 213 / 100;
#X floatatom 383 236 5 0 0 0 - - -;
#X obj 33 329 +;
#X obj 24 39 inlet;
#X obj 95 293 tabread \$1;
#X obj 33 258 tabread \$2;
#X obj 280 95 inlet;
#X text 64 39 <-- numeric input;
#X obj 33 419 tabwrite \$1;
#X obj 163 420 tabwrite \$2;
#X obj 266 150 counter \$3;
#X text 185 95 array size -->;
#X text 396 289 <-- 'swarm' calculation;
#X text 447 115 <-- update position;
#X text 29 444 ^ particle pos;
#X text 161 445 ^ local velocity;
#X obj 310 235 r \$1_init;
#X obj 381 94 tgl 15 0 empty empty empty 0 -6 0 10 -262144 -1 -1 1
1;
#X obj 265 287 expr 1*($f2-$f1)*$f3;
#X obj 373 69 loadbang;
#X obj 383 113 metro 20;
#X obj 300 325 expr if ($f1<0.01 && $f1>-0.05 \, $f2*5 - 2.5 \, $f1)
;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 2 0 19 2;
#X connect 2 0 22 1;
#X connect 3 0 9 0;
#X connect 3 0 19 0;
#X connect 4 0 19 1;
#X connect 5 0 3 1;
#X connect 6 0 3 0;
#X connect 7 0 11 1;
#X connect 11 0 5 0;
#X connect 11 0 6 0;
#X connect 11 0 9 1;
#X connect 11 0 10 1;
#X connect 17 0 19 1;
#X connect 18 0 21 0;
#X connect 19 0 22 0;
#X connect 20 0 18 0;
#X connect 21 0 0 0;
#X connect 21 0 11 0;
#X connect 22 0 10 0;
